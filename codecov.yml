# Codecov configuration for mpmsub
# https://docs.codecov.com/docs/codecov-yaml

coverage:
  precision: 2
  round: down
  range: "70...100"

  status:
    project:
      default:
        target: 75%
        threshold: 1%
        base: auto
        branches:
          - main
        if_ci_failed: error
    patch:
      default:
        target: 80%
        threshold: 2%
        base: auto
        branches:
          - main
        if_ci_failed: error

  ignore:
    - "tests/"
    - "examples/"
    - "benchmarks/"
    - "docs/"
    - "site/"
    - "htmlcov/"
    - "setup.py"
    - "conftest.py"

comment:
  layout: "reach,diff,flags,tree,reach"
  behavior: default
  require_changes: false
  require_base: no
  require_head: yes
  branches:
    - main

github_checks:
  annotations: true

parsers:
  gcov:
    branch_detection:
      conditional: yes
      loop: yes
      method: no
      macro: no

flags:
  unittests:
    paths:
      - mpmsub/
    carryforward: false
  integration:
    paths:
      - mpmsub/
    carryforward: false

component_management:
  default_rules:
    statuses:
      - type: project
        target: 75%
      - type: patch
        target: 80%
  individual_components:
    - component_id: core
      name: "Core Library"
      paths:
        - mpmsub/cluster.py
        - mpmsub/utils.py
      statuses:
        - type: project
          target: 85%
        - type: patch
          target: 90%
    - component_id: api
      name: "API Interface"
      paths:
        - mpmsub/__init__.py
      statuses:
        - type: project
          target: 80%
        - type: patch
          target: 85%
